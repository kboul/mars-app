(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports={cardStyle:"Units_cardStyle__3QMaS",cardBodyStyle:"Units_cardBodyStyle__3xiy2",clickableCard:"Units_clickableCard__Jirkl"}},29:function(e,t,a){e.exports={items:"Search_items__329dL",searchBar:"Search_searchBar__2FHAm"}},41:function(e,t,a){e.exports={avatarName:"UserAvatar_avatarName__3lLhf"}},43:function(e,t,a){e.exports=a(83)},50:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(13),o=a.n(c),i=a(87),s=(a(48),a(49),a(50),a(51),a(6)),l=a(7),u=a(9),m=a(8),d=a(10),p=a(89),h=a(85),g=a(86),v=a(42),b=a(5),f=a.n(b),y=a(11),E=a(19),w=a.n(E);w.a.defaults.baseURL="http://mars.theblueground.net/api",w.a.interceptors.response.use(null,function(e){return e.response&&e.response.status>=400&&e.response.status<500||console.log("Logging the error ",e),Promise.reject(e)});var k={get:w.a.get,post:w.a.post},N=a(37),j=a.n(N),O="/auth/login",S="token",x="userImg",I="userName";function C(){return(C=Object(y.a)(f.a.mark(function e(t,a){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post(O,{email:t,password:a});case 2:n=e.sent,r=n.data,localStorage.setItem(S,r.token.accessToken),localStorage.setItem(I,r.user.name),localStorage.setItem(x,r.user.picture);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(){return localStorage.getItem(S)}function B(){return{headers:{Authorization:"bearer ".concat(_())}}}function U(){return localStorage.getItem(x)}function D(){return localStorage.getItem(I)}var L={login:function(e,t){return C.apply(this,arguments)},isUserLoggedIn:function(){var e=localStorage.getItem(S);return e?j()(e):null},getJwt:_,getHeaders:B,getUserImg:U,getUserName:D},A=function(e){e.path;var t=e.component,a=e.render,n=Object(v.a)(e,["path","component","render"]);return r.a.createElement(h.a,Object.assign({},n,{render:function(e){return L.isUserLoggedIn()?t?r.a.createElement(t,e):a(e):r.a.createElement(g.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},M=a(17),T=a(14),z=a.n(T),P=a(18),J={boxShadow:"0 0 5px 1px green"},Q=function(e){var t=e.name,a=e.label,n=e.value,c=e.error,o=e.onChange;return r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{style:c||"email"!==t||""===n?null:J,value:n,onChange:o,type:"email"===t?"text":"password",className:"form-control",id:t,name:t,placeholder:a}),c&&r.a.createElement("div",{className:"alert alert-danger"},c))},F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},errors:[]},a.validate=function(){var e=z.a.validate(a.state.data,a.schema,{abortEarly:!1});if(!e.error)return null;var t={},n=!0,r=!1,c=void 0;try{for(var o,i=e.error.details[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;t[s.path[0]]=s.message}}catch(l){r=!0,c=l}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return t},a.validateProperty=function(e){var t=e.name,n=e.value,r=Object(P.a)({},t,n),c=Object(P.a)({},t,a.schema[t]),o=z.a.validate(r,c).error;return o?o.details[0].message:null},a.handleSubmit=function(e){e.preventDefault();var t=a.validate();a.setState({errors:t||{}}),t||a.doSubmit()},a.handleChange=function(e){var t=e.currentTarget,n=Object(M.a)({},a.state.errors),r=a.validateProperty(t);r?n[t.name]=r:delete n[t.name];var c=Object(M.a)({},a.state.data);c[t.name]=t.value,a.setState({data:c,errors:n})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderInput",value:function(e,t){var a=this.state,n=a.data,c=a.errors;return r.a.createElement(Q,{name:e,label:t,value:n[e],error:c[e],onChange:this.handleChange})}},{key:"renderButton",value:function(e){return r.a.createElement("button",{disabled:this.validate(),type:"submit",className:"btn btn-secondary"},e)}}]),t}(n.Component),H=(a(79),function(e){var t=e.background,a=e.color;return r.a.createElement("b",null,"Blueground on\xa0",r.a.createElement("span",{className:"circle",style:{background:t,color:a}},"Mars"))}),$=(a(80),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:{email:"",password:""},errors:{}},a.schema={email:z.a.string().email({minDomainAtoms:2}).required().regex(/^[\w-]{2,8}@.*$/,"2-8 min chars before @").regex(/(?:(?:19|20)[0-9]{2})/,"year of birth in 4 digits").regex(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,"2 letter country code after .").label("Email"),password:z.a.string().required().label("Password")},a.doSubmit=Object(y.a)(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.state.data,e.next=4,L.login(t.email,t.password);case 4:a.props.history.push("/units"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&400===e.t0.response.status&&((n=Object(M.a)({},a.state.errors)).email=e.t0.response.data,a.setState({errors:n}));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return L.isUserLoggedIn()?r.a.createElement(g.a,{to:"/units"}):r.a.createElement("div",{className:"container authenticate-container"},r.a.createElement("form",{className:"form-authenticate",noValidate:!0,onSubmit:this.handleSubmit},r.a.createElement("div",{className:"card rounded-0"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"mb-4"},r.a.createElement(H,{background:"black",color:"white"})),this.renderInput("email","Email"),this.renderInput("password","Password"),r.a.createElement("div",{className:"float-right"},this.renderButton("Sign In"))))))}}]),t}(F)),q=a(88),R=a(30),W=(a(81),function(e){var t=e.modal,a=e.toggle,n=e.children;return r.a.createElement(R.a,{isOpen:t,toggle:a,size:"lg"},r.a.createElement(R.b,null,n))}),V=a(39),G=a.n(V),K=function(e){var t=e.stars;return r.a.createElement(G.a,{count:5,value:t,size:24,color1:"#DCDCDC",color2:"#000000"})},X="/units";function Y(e){return"".concat((e/5600).toFixed(2)," BTC")}a(82);var Z=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={unit:{},amenities:[],availability:[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(f.a.mark(function e(){var t,a,n,r,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,o=t,k.get("".concat(X,"/").concat(o),B());case 3:a=e.sent,n=a.data,r=n.amenities,c=n.availability,this.setState({unit:n,amenities:r,availability:c});case 8:case"end":return e.stop()}var o},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"createMarkup",value:function(e){return{__html:"<i>Description</i>: ".concat(e)}}},{key:"findBiggestImg",value:function(e){return e.find(function(e){return e.includes("w800")})}},{key:"render",value:function(){var e=this.state,t=e.unit,a=e.amenities,n=e.availability;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row",id:"modalImage"},t&&t.pictures&&r.a.createElement("img",{src:"".concat("http://mars.theblueground.net","/").concat(this.findBiggestImg(t.pictures)),alt:"".concat("http://mars.theblueground.net","/").concat(this.findBiggestImg(t.pictures))})),r.a.createElement("div",{id:"nameRegion",className:"d-flex justify-content-between"},r.a.createElement("div",null,r.a.createElement("b",null," ",t.name," - ",t.region)),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-secondary special-btn",style:{width:"100px"}},r.a.createElement("b",null,Y(t.price))))),r.a.createElement(K,{stars:t.rating}),r.a.createElement("div",{id:"description",dangerouslySetInnerHTML:this.createMarkup(t.description)}),r.a.createElement("div",{id:"amenities"},r.a.createElement("b",null,"Amenities: "),a.join(", ")),r.a.createElement("div",{className:"row"},n.map(function(e){return r.a.createElement("div",{className:"col-12 col-sm-3 col-md-3",key:e},r.a.createElement("button",{className:"btn btn-light btn-block special-btn",style:{marginBottom:"8px"}},e))})),r.a.createElement("button",{type:"button",className:"btn btn-secondary btn-dark book-btn float-right"},"Book"))}}]),t}(n.Component),ee=Object(q.a)(Z),te=a(29),ae=function(e){var t=e.value,a=e.onSearch,n=e.itemsDisplayed;return r.a.createElement("div",{className:"input-group col-md-4 mb-4 ".concat(te.searchBar)},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text fa fa-search py-2"})),r.a.createElement("input",{type:"text",value:t,className:"form-control",placeholder:"Search...",onChange:a}),r.a.createElement("div",{className:te.items},"".concat(n," items")))},ne=a(41),re=function(e){var t=e.image,a=e.name;return r.a.createElement("div",{className:"media"},r.a.createElement("img",{width:"32",height:"32",src:t,className:"mr-2",alt:t}),r.a.createElement("div",{className:"media-body ".concat(ne.avatarName)},a))},ce="/units";var oe=a(24),ie=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={units:[],modal:!1,searchQuery:"",userImg:"",userName:""},a.toggle=function(){a.setState({modal:!a.state.modal})},a.addIdToUrl=function(e){a.props.history.push("/units/".concat(e))},a.handleClick=function(e){a.toggle(),a.addIdToUrl(e)},a.handleSearch=function(e){var t=e.currentTarget.value;a.setState({searchQuery:t})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(f.a.mark(function e(){var t,a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get(ce,B());case 2:t=e.sent,a=t.data,n=U(),r=D(),this.setState({units:a.data,userImg:n,userName:r});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.userImg,n=t.userName,c=t.searchQuery,o=t.modal,i=t.units.filter(function(e){return e.name.toLowerCase().includes(c)||e.region.toLowerCase().includes(c)});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"d-flex justify-content-between mt-2 mb-4"},r.a.createElement(H,{background:"white",color:"black"}),r.a.createElement(re,{image:a,name:n})),r.a.createElement(ae,{value:c,onSearch:this.handleSearch,itemsDisplayed:i.length}),r.a.createElement("div",{className:"row mt-2"},r.a.createElement(W,{modal:o,toggle:this.toggle},r.a.createElement(ee,null)),i.map(function(t){var a=t.id,n=t.pictures,c=t.name,o=t.region,i=t.description,s=t.cancellation,l=t.price,u=t.rating;return r.a.createElement("div",{className:"col-md-4 ".concat(oe.clickableCard),key:a,onClick:function(){return e.handleClick(a)}},r.a.createElement("div",{className:"card mb-4 box-shadow ".concat(oe.cardStyle)},r.a.createElement("img",{className:"card-img-top",src:"".concat("http://mars.theblueground.net","/").concat(n[1]),alt:"".concat("http://mars.theblueground.net","/").concat(n[1])}),r.a.createElement("div",{className:"card-body ".concat(oe.cardBodyStyle)},r.a.createElement("b",null,c),r.a.createElement("div",null,o),r.a.createElement("div",{className:"card-text"},"".concat(i.substring(0,60),"...")),r.a.createElement("div",null,s),r.a.createElement(K,{stars:u}),r.a.createElement("div",{className:"card-text"},r.a.createElement("b",null,Y(l))))))})))}}]),t}(n.Component),se=Object(q.a)(ie),le=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(A,{path:"/units/:id",component:se}),r.a.createElement(A,{path:"/units",component:se}),r.a.createElement(h.a,{path:"/signin",component:$}),r.a.createElement(g.a,{from:"/",exact:!0,to:"/signin"}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(i.a,null,r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,1,2]]]);
//# sourceMappingURL=main.9885bccf.chunk.js.map