(this["webpackJsonpmars-app"]=this["webpackJsonpmars-app"]||[]).push([[0],{24:function(e,t,a){e.exports={cardStyle:"Units_cardStyle__2WoeV",cardBodyStyle:"Units_cardBodyStyle__2cScP",clickableCard:"Units_clickableCard__2CUBQ"}},28:function(e,t,a){e.exports={items:"Search_items__2PMVV",searchBar:"Search_searchBar__2aTcA"}},47:function(e,t,a){e.exports={avatarName:"UserAvatar_avatarName__170d0"}},49:function(e,t,a){e.exports=a(93)},56:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),i=a(18),s=(a(54),a(55),a(56),a(17)),l=a(48),u=a(7),m=a.n(u),d=a(11),p=a(43),b=a.n(p),h=a(22),f=a.n(h);f.a.defaults.baseURL="http://mars.theblueground.net/api",f.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||console.log("Logging the error ",e),Promise.reject(e)}));var g={get:f.a.get,post:f.a.post},v=function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("/auth/login",{email:t,password:a});case 2:n=e.sent,r=n.data,localStorage.setItem("token",r.token.accessToken),localStorage.setItem("userName",r.user.name),localStorage.setItem("userImg",r.user.picture);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),y=function(){var e=localStorage.getItem("token");return e?b()(e):null},E=function(){return localStorage.getItem("token")},O=function(){return{headers:{Authorization:"bearer ".concat(E())}}},j=function(){return localStorage.getItem("userImg")},w=function(){return localStorage.getItem("userName")},k=function(e){e.path;var t=e.component,a=e.render,n=Object(l.a)(e,["path","component","render"]);return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return y()?t?r.a.createElement(t,e):a(e):r.a.createElement(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},N=a(20),S=a(12),x=a(13),I=a(15),P=a(14),C=a(16),_=a(21),B=a.n(_),D={boxShadow:"0 0 5px 1px green"},A=function(e){var t=e.name,a=e.label,n=e.value,c=e.error,o=e.onChange;return r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{style:c||"email"!==t||""===n?null:D,value:n,onChange:o,type:"email"===t?"text":"password",className:"form-control",id:t,name:t,placeholder:a}),c&&r.a.createElement("div",{className:"alert alert-danger"},c))};function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M=function(e){function t(){var e,a;Object(S.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(I.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},errors:[]},a.validate=function(){var e=a.state.data,t=B.a.validate(e,a.schema,{abortEarly:!1});if(!t.error)return null;var n={},r=!0,c=!1,o=void 0;try{for(var i,s=t.error.details[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value;n[l.path[0]]=l.message}}catch(u){c=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(c)throw o}}return n},a.validateProperty=function(e){var t=e.name,n=e.value,r=Object(N.a)({},t,n),c=Object(N.a)({},t,a.schema[t]),o=B.a.validate(r,c).error;return o?o.details[0].message:null},a.handleSubmit=function(e){e.preventDefault();var t=a.validate();a.setState({errors:t||{}}),t||a.doSubmit()},a.handleChange=function(e){var t=e.currentTarget,n=a.state,r=n.errors,c=n.data,o=U({},r),i=a.validateProperty(t);i?o[t.name]=i:delete o[t.name];var s=U({},c);s[t.name]=t.value,a.setState({data:s,errors:o})},a}return Object(C.a)(t,e),Object(x.a)(t,[{key:"renderInput",value:function(e,t){var a=this.state,n=a.data,c=a.errors;return r.a.createElement(A,{name:e,label:t,value:n[e],error:c[e],onChange:this.handleChange})}},{key:"renderButton",value:function(e){return r.a.createElement("button",{disabled:this.validate(),type:"submit",className:"btn btn-secondary"},e)}}]),t}(n.Component),z=(a(82),function(e){var t={background:e.background,color:e.color};return r.a.createElement("b",null,"Blueground on\xa0",r.a.createElement("span",{className:"circle",style:t},"Mars"))});a(83);function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var V=function(e){function t(){var e,a;Object(S.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(I.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).state={data:{email:"",password:""},errors:{}},a.schema={email:B.a.string().email({minDomainAtoms:2}).required().regex(/^[\w-]{2,8}@.*$/,"2-8 min chars before @").regex(/(?:(?:19|20)[0-9]{2})/,"year of birth in 4 digits").regex(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,"2 letter country code after .").label("Email"),password:B.a.string().required().label("Password")},a.doSubmit=Object(d.a)(m.a.mark((function e(){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.state.data,e.next=4,v(t.email,t.password);case 4:a.props.history.push("/units"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response&&400===e.t0.response.status&&(n=a.state.errors,(r=Q({},n)).email=e.t0.response.data,a.setState({errors:r}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),a}return Object(C.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){return y()?r.a.createElement(s.a,{to:"/units"}):r.a.createElement("div",{className:"container authenticate-container"},r.a.createElement("form",{className:"form-authenticate",noValidate:!0,onSubmit:this.handleSubmit},r.a.createElement("div",{className:"card rounded-0"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"mb-4"},r.a.createElement(z,{background:"black",color:"white"})),this.renderInput("email","Email"),this.renderInput("password","Password"),r.a.createElement("div",{className:"float-right"},this.renderButton("Login"))))))}}]),t}(M),W=a(96),$=a(95),q=(a(84),function(e){var t=e.modal,a=e.toggle,n=e.children;return r.a.createElement(W.a,{isOpen:t,toggle:a,size:"lg"},r.a.createElement($.a,null,n))}),F=a(46),J=a.n(F),R=function(e){var t=e.stars;return r.a.createElement(J.a,{count:5,value:t,size:24,color1:"#DCDCDC",color2:"#000000"})},H=function(e){return g.get("".concat("/units","/").concat(e),O())},K=function(e){return"".concat((e/5600).toFixed(2)," BTC")},G=(a(92),function(e){function t(){var e,a;Object(S.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(I.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).state={unit:{},amenities:[],availability:[]},a.createMarkup=function(e){return{__html:"<i>Description</i>: ".concat(e)}},a.findBiggestImg=function(e){return e.find((function(e){return e.includes("w800")}))},a}return Object(C.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,H(t);case 3:a=e.sent,n=a.data,r=n.amenities,c=n.availability,this.setState({unit:n,amenities:r,availability:c});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.unit,a=e.amenities,n=e.availability;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row",id:"modalImage"},t&&t.pictures&&r.a.createElement("img",{src:"".concat("http://mars.theblueground.net","/").concat(this.findBiggestImg(t.pictures)),alt:"".concat("http://mars.theblueground.net","/").concat(this.findBiggestImg(t.pictures))})),r.a.createElement("div",{id:"nameRegion",className:"d-flex justify-content-between"},r.a.createElement("div",null,r.a.createElement("b",null," ","".concat(t.name," -").concat(t.region))),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-secondary special-btn",style:{width:"100px"}},r.a.createElement("b",null,K(t.price))))),r.a.createElement(R,{stars:t.rating}),r.a.createElement("div",{id:"description",dangerouslySetInnerHTML:this.createMarkup(t.description)}),r.a.createElement("div",{id:"amenities"},r.a.createElement("b",null,"Amenities: "),a.join(", ")),r.a.createElement("div",{className:"row"},n.map((function(e){return r.a.createElement("div",{className:"col-12 col-sm-3 col-md-3",key:e},r.a.createElement("button",{className:"btn btn-light btn-block special-btn",type:"button",style:{marginBottom:"8px"}},e))}))),r.a.createElement("button",{type:"button",className:"btn btn-secondary btn-dark book-btn float-right"},"Book"))}}]),t}(n.Component)),X=Object(s.g)(G),Y=a(28),Z=function(e){var t=e.value,a=e.onSearch,n=e.itemsDisplayed;return r.a.createElement("div",{className:"input-group col-md-4 mb-4 ".concat(Y.searchBar)},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text fa fa-search py-2"})),r.a.createElement("input",{type:"text",value:t,className:"form-control",placeholder:"Search...",onChange:a}),r.a.createElement("div",{className:Y.items},"".concat(n," items")))},ee=a(47),te=function(e){var t=e.image,a=e.name;return r.a.createElement("div",{className:"media"},r.a.createElement("img",{width:"32",height:"32",src:t,className:"mr-2",alt:t}),r.a.createElement("div",{className:"media-body ".concat(ee.avatarName)},a))},ae=a(24),ne=function(e){function t(){var e,a;Object(S.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(I.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).state={units:[],modal:!1,searchQuery:"",userImg:"",userName:""},a.toggle=function(){a.setState((function(e){return{modal:!e.modal}}))},a.addIdToUrl=function(e){a.props.history.push("/units/".concat(e))},a.handleClick=function(e){a.toggle(),a.addIdToUrl(e)},a.handleSearch=function(e){var t=e.currentTarget.value;a.setState({searchQuery:t})},a}return Object(C.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/units",O());case 2:t=e.sent,a=t.data,n=j(),r=w(),this.setState({units:a.data,userImg:n,userName:r});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.userImg,n=t.userName,c=t.searchQuery,o=t.modal,i=t.units.filter((function(e){return e.name.toLowerCase().includes(c)||e.region.toLowerCase().includes(c)}));return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"d-flex justify-content-between mt-2 mb-4"},r.a.createElement(z,{background:"white",color:"black"}),r.a.createElement(te,{image:a,name:n})),r.a.createElement(Z,{value:c,onSearch:this.handleSearch,itemsDisplayed:i.length}),r.a.createElement("div",{className:"row mt-2"},r.a.createElement(q,{modal:o,toggle:this.toggle},r.a.createElement(X,null)),i.map((function(t){var a=t.id,n=t.pictures,c=t.name,o=t.region,i=t.description,s=t.cancellation,l=t.price,u=t.rating;return r.a.createElement("div",{className:"col-md-4 ".concat(ae.clickableCard),key:a},r.a.createElement("span",{role:"button",tabIndex:"-1",onKeyPress:function(){},onClick:function(){return e.handleClick(a)}},r.a.createElement("div",{className:"card mb-4 box-shadow ".concat(ae.cardStyle)},r.a.createElement("img",{className:"card-img-top",src:"".concat("http://mars.theblueground.net","/").concat(n[1]),alt:"".concat("http://mars.theblueground.net","/").concat(n[1])}),r.a.createElement("div",{className:"card-body ".concat(ae.cardBodyStyle)},r.a.createElement("b",null,c),r.a.createElement("div",null,o),r.a.createElement("div",{className:"card-text"},"".concat(i.substring(0,60),"...")),r.a.createElement("div",null,s),r.a.createElement(R,{stars:u}),r.a.createElement("div",{className:"card-text"},r.a.createElement("b",null,K(l)))))))}))))}}]),t}(n.Component),re=Object(s.g)(ne),ce=function(){return r.a.createElement(s.d,null,r.a.createElement(k,{path:"/units/:id",component:re}),r.a.createElement(k,{path:"/units",component:re}),r.a.createElement(s.b,{path:"/login",component:V}),r.a.createElement(s.a,{from:"/",exact:!0,to:"/login"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(i.a,null,r.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[49,1,2]]]);
//# sourceMappingURL=main.020b3fd9.chunk.js.map